---
custom_card_eraycetinay_lock:
  template:
    - "ulm_custom_card_eraycetinay_lock_language_variables"
    - "icon_info_bg"
    - "ulm_language_variables"
  tap_action:
    action: |
      [[[
        return variables.ulm_custom_card_eraycetinay_lock_tap_control ? "call-service" : "more-info";
      ]]]
    # only related with call-service action
    service: |
      [[[
        if(variables.ulm_custom_card_eraycetinay_lock_tap_control){
          if(variables.ulm_custom_card_eraycetinay_lock_open){
            return "lock.open";
          } else {
            if (entity.state == "locked"){
                return "lock.unlock";
            } else if (entity.state == "unlocked"){
              return "lock.lock";
            }
          }
        } else {
          return;
        }
      ]]]
    # only related with call-service action
    service_data:
      entity_id: |
        [[[ return entity.entity_id; ]]]
  show_label: true
  show_name: true
  triggers_update:
    - "[[[ return entity.entity_id; ]]]"
  label: |
    [[[
      let state = entity.state;
      return variables["custom_card_eraycetinay_lock_" + state] ? variables["custom_card_eraycetinay_lock_" + state] : variables["ulm_" + state] ? variables["ulm_" + state] : state;
    ]]]
  state:
    - operator: "template"
      value: |
        [[[ return entity.state == ("unlocked" || "open"); ]]]
      styles:
        icon:
          - color: "rgba(var(--color-yellow),1)"
        img_cell:
          - background-color: "rgba(var(--color-yellow), 0.2)"
    - operator: "template"
      value: |
        [[[ return entity.state == "locked"; ]]]
      styles:
        icon:
          - color: "rgba(var(--color-green),1)"
        img_cell:
          - background-color: "rgba(var(--color-green), 0.2)"
